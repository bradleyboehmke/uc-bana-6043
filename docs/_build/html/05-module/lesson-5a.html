
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Lession 5a: Plotting with Pandas &#8212; UC BANA 6043 Statistical Computing</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '05-module/lesson-5a';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lesson 5b: Plotting with Matplotlib" href="lesson-5b.html" />
    <link rel="prev" title="Overview" href="overview.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="UC BANA 6043 Statistical Computing - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="UC BANA 6043 Statistical Computing - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Statistical Computing
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Module 0 (Pre-class)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../00-module/lesson-0b.html">Lesson 0: Configuring your computer</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module 1</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../01-module/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-module/lesson-1a.html">Lesson 1a: Introduction to JupyterLab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-module/lesson-1b.html">Lesson 1b: Variables, operators &amp; types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-module/lesson-1c.html">Lesson 1c: More operators &amp; conditionals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01-module/lesson-1d.html">Lesson 1d: Data structures</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module 2</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../02-module/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-module/lesson-2a.html">Lesson 2a: Packages, libraries &amp; modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-module/lesson-2b.html">Lesson 2b: Importing data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-module/lesson-2c.html">Lesson 2c: Deeper dive on DataFrames</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module 3</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../03-module/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-module/lesson-3a.html">Lesson 3a: Subsetting data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-module/lesson-3b.html">Lesson 3b: Manipulating data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-module/lesson-3c.html">Lesson 3c: Summarizing data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module 4</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../04-module/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-module/lesson-4a.html">Lession 4a: Tidy data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-module/lesson-4b.html">Lesson 4b: Relational data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04-module/lesson-4c.html">Lesson 4c: Handling text data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module 5</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Lession 5a: Plotting with Pandas</a></li>
<li class="toctree-l1"><a class="reference internal" href="lesson-5b.html">Lesson 5b: Plotting with Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="lesson-5c.html">Lesson 5c: Plotting with Bokeh</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module 6</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../06-module/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-module/lesson-6a.html">Lession 6a: Conditional statements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-module/lesson-6b.html">Lesson 6b: Iteration statement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-module/lesson-6c.html">Lesson 6C: Writing functions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Module 7</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../07-module/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-module/lesson-7a.html">Lesson 7a: Data Exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-module/lesson-7b.html">Lesson 7b: First model with scikit-learn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-module/lesson-7c.html">Lesson 7c: Feature Engineering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-module/lesson-7d.html">Lesson 7d: Model Evaluation &amp; Selection</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/bradleyboehmke/uc-bana-6043" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/bradleyboehmke/uc-bana-6043/edit/main/book/_build/05-module/lesson-5a.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/bradleyboehmke/uc-bana-6043/issues/new?title=Issue%20on%20page%20%2F05-module/lesson-5a.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/05-module/lesson-5a.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Lession 5a: Plotting with Pandas</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-objectives">Learning objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-plot-attribute">The <code class="docutils literal notranslate"><span class="pre">.plot</span></code> attribute</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#knowledge-check">Knowledge check</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-a-series">Plotting a Series</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-a-dataframe">Plotting a DataFrame</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#under-the-hood-matplotlib">Under the hood - Matplotlib</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-environment">Computing environment</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="lession-5a-plotting-with-pandas">
<h1>Lession 5a: Plotting with Pandas<a class="headerlink" href="#lession-5a-plotting-with-pandas" title="Link to this heading">#</a></h1>
<p>The Python visualization ecosystem is vast and can come across as daunting at first. In fact, <a class="reference external" href="https://pyviz.org/index.html">PyViz</a> is a website that was created for the sole purpose of helping users decide on the best open-source Python data visualization tools for their needs. I highly recommend you take some time to explore the resource.</p>
<p>However, since we have spent the last several modules getting comfortable using Pandas for our statistical computing needs, it is only fitting to continue using Pandas and explore the high-level plotting capabilities it provides before exploring other libraries.  Consequently, this lesson is mainly focused on making you capable of creating basic plots directly with your Pandas Series and DataFrame objects.</p>
<section id="learning-objectives">
<h2>Learning objectives<a class="headerlink" href="#learning-objectives" title="Link to this heading">#</a></h2>
<p>By the end of this lesson you will be able to:</p>
<ul class="simple">
<li><p>Create univariate plots based on Series</p></li>
<li><p>Create bivariate plots based on DataFrames</p></li>
</ul>
</section>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Link to this heading">#</a></h2>
<p>Load Pandas to provide you access to the join functions we’ll cover in this lesson.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<p>This lesson will also use the Complete Journey data; but before we start we’ll join the transactions data with the products and household demographics data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">completejourney_py</span> <span class="kn">import</span> <span class="n">get_data</span>

<span class="n">cj_data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">()</span>
<span class="n">df</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">cj_data</span><span class="p">[</span><span class="s1">&#39;transactions&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">cj_data</span><span class="p">[</span><span class="s1">&#39;products&#39;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;product_id&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">cj_data</span><span class="p">[</span><span class="s1">&#39;demographics&#39;</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;household_id&#39;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>household_id</th>
      <th>store_id</th>
      <th>basket_id</th>
      <th>product_id</th>
      <th>quantity</th>
      <th>sales_value</th>
      <th>retail_disc</th>
      <th>coupon_disc</th>
      <th>coupon_match_disc</th>
      <th>week</th>
      <th>...</th>
      <th>product_category</th>
      <th>product_type</th>
      <th>package_size</th>
      <th>age</th>
      <th>income</th>
      <th>home_ownership</th>
      <th>marital_status</th>
      <th>household_size</th>
      <th>household_comp</th>
      <th>kids_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>900</td>
      <td>330</td>
      <td>31198570044</td>
      <td>1095275</td>
      <td>1</td>
      <td>0.50</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1</td>
      <td>...</td>
      <td>ROLLS</td>
      <td>ROLLS: BAGELS</td>
      <td>4 OZ</td>
      <td>35-44</td>
      <td>35-49K</td>
      <td>Homeowner</td>
      <td>Married</td>
      <td>2</td>
      <td>2 Adults No Kids</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>900</td>
      <td>330</td>
      <td>31198570047</td>
      <td>9878513</td>
      <td>1</td>
      <td>0.99</td>
      <td>0.10</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1</td>
      <td>...</td>
      <td>FACIAL TISS/DNR NAPKIN</td>
      <td>FACIAL TISSUE &amp; PAPER HANDKE</td>
      <td>85 CT</td>
      <td>35-44</td>
      <td>35-49K</td>
      <td>Homeowner</td>
      <td>Married</td>
      <td>2</td>
      <td>2 Adults No Kids</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1228</td>
      <td>406</td>
      <td>31198655051</td>
      <td>1041453</td>
      <td>1</td>
      <td>1.43</td>
      <td>0.15</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1</td>
      <td>...</td>
      <td>BAG SNACKS</td>
      <td>POTATO CHIPS</td>
      <td>11.5 OZ</td>
      <td>45-54</td>
      <td>100-124K</td>
      <td>None</td>
      <td>Unmarried</td>
      <td>1</td>
      <td>1 Adult No Kids</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>906</td>
      <td>319</td>
      <td>31198705046</td>
      <td>1020156</td>
      <td>1</td>
      <td>1.50</td>
      <td>0.29</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1</td>
      <td>...</td>
      <td>REFRGRATD DOUGH PRODUCTS</td>
      <td>REFRIGERATED BAGELS</td>
      <td>17.1 OZ</td>
      <td>55-64</td>
      <td>Under 15K</td>
      <td>Homeowner</td>
      <td>Married</td>
      <td>2</td>
      <td>1 Adult Kids</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>906</td>
      <td>319</td>
      <td>31198705046</td>
      <td>1053875</td>
      <td>2</td>
      <td>2.78</td>
      <td>0.80</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1</td>
      <td>...</td>
      <td>SEAFOOD - SHELF STABLE</td>
      <td>TUNA</td>
      <td>5.0 OZ</td>
      <td>55-64</td>
      <td>Under 15K</td>
      <td>Homeowner</td>
      <td>Married</td>
      <td>2</td>
      <td>1 Adult Kids</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 24 columns</p>
</div></div></div>
</div>
</section>
<section id="the-plot-attribute">
<h2>The <code class="docutils literal notranslate"><span class="pre">.plot</span></code> attribute<a class="headerlink" href="#the-plot-attribute" title="Link to this heading">#</a></h2>
<p>Both Pandas Series and DataFrames have a <code class="docutils literal notranslate"><span class="pre">.plot</span></code> attribute that allow us to plot our data. This <code class="docutils literal notranslate"><span class="pre">.plot</span></code> attribute is a little unique as you can call it as a method and specify the plot of interest using an argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;scatter&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Or you can use it to access sub-methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In this lesson and throughoug most of this class you will notice that I prefer to use <code class="docutils literal notranslate"><span class="pre">.plot</span></code> to access sub-methods. However, this is simply a preference as you can accomplish the same output with either approach.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">.plot</span></code> is pretty versatile as it (and all the sub-methods) provide a lot of parameters to control and refine our plots. Currently, the available plots that we can make with <code class="docutils literal notranslate"><span class="pre">.plot</span></code> include:</p>
<ul class="simple">
<li><p><strong>line</strong> : line plot (default)</p></li>
<li><p><strong>bar</strong> : vertical bar plot</p></li>
<li><p><strong>barh</strong> : horizontal bar plot</p></li>
<li><p><strong>hist</strong> : histogram</p></li>
<li><p><strong>box</strong> : boxplot</p></li>
<li><p><strong>kde</strong> : Kernel Density Estimation plot</p></li>
<li><p><strong>density</strong> : same as ‘kde’</p></li>
<li><p><strong>area</strong> : area plot</p></li>
<li><p><strong>pie</strong> : pie plot</p></li>
<li><p><strong>scatter</strong> : scatter plot (DataFrame only)</p></li>
<li><p><strong>hexbin</strong> : hexbin plot (DataFrame only)</p></li>
</ul>
<section id="knowledge-check">
<h3>Knowledge check<a class="headerlink" href="#knowledge-check" title="Link to this heading">#</a></h3>
<div class="attention admonition">
<p class="admonition-title">Questions:</p>
<p>Check out the <code class="docutils literal notranslate"><span class="pre">.plot</span></code> documentation for <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.plot.html">Series</a> and <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.plot.html">DataFrames</a>.</p>
<ol class="arabic simple">
<li><p>What parameter would you use to control the figure size?</p></li>
<li><p>What parameter would you use to add a title?</p></li>
<li><p>What parameter(s) would you use to log scale an x and/or y axis?</p></li>
</ol>
</div>
</section>
</section>
<section id="plotting-a-series">
<h2>Plotting a Series<a class="headerlink" href="#plotting-a-series" title="Link to this heading">#</a></h2>
<p>Often, our analysis starts by understanding individual variables within our data and analyzing univariate distributions helps with this process. Consequently, its very common to simply select a single Series and visualize the distribution of values in that series.</p>
<p>Let’s start by creating a histogram of the transaction <code class="docutils literal notranslate"><span class="pre">sales_value</span></code>s in our Complete Journey data. We can do this with <code class="docutils literal notranslate"><span class="pre">hist()</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;sales_value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;Axes: ylabel=&#39;Frequency&#39;&gt;
</pre></div>
</div>
<img alt="../_images/93d19ce6f9736e73b6e2daf103e7e825d0c5e1adaa55ac8412d6d8caa8018a07.png" src="../_images/93d19ce6f9736e73b6e2daf103e7e825d0c5e1adaa55ac8412d6d8caa8018a07.png" />
</div>
</div>
<p>You probably notice a couple of things above:</p>
<ol class="arabic simple">
<li><p>What’s with the <code class="docutils literal notranslate"><span class="pre">&lt;AxesSubplot:ylabel='Frequency'&gt;</span></code> output above our plot?</p></li>
<li><p>We have many zeroes in our data plus this feature is heavily skewed. Consequently, our histogram is not very informative at this point.</p></li>
</ol>
<p>When we make a plot, the output will include the name of the object, which is what we see happening with <code class="docutils literal notranslate"><span class="pre">&lt;AxesSubplot:ylabel='Frequency'&gt;</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We can remove this output by adding a <code class="docutils literal notranslate"><span class="pre">;</span></code> after the plotting function call.</p>
</div>
<p>As for #2, we can make some adjustments such as remove any zero dollar transactions, log transform our axis, and increase the number of bins. This helps to pull out additional insights in our <code class="docutils literal notranslate"><span class="pre">sales_value</span></code> distribution. For example, we see we have a lot of very low dollar transactions and the frequency decreases as the transaction dollar amount increases. However, we also see an increase in transactions right at the $200 mark but that decreases quickly. There are also a few outlier transaction values that are around the $600 and $800 value marks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;sales_value&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;sales_value&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">log</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Distribution of Sales Values&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/13971ba7d793ae78b06386e925fd0078360506b0864226fbbfddfefc74370093.png" src="../_images/13971ba7d793ae78b06386e925fd0078360506b0864226fbbfddfefc74370093.png" />
</div>
</div>
<p>Box plots and kernel density estimation (KDE) plots are an alternative way to view univariate distribtions. For example, let’s compute the total <code class="docutils literal notranslate"><span class="pre">sales_value</span></code> across all stores. The resulting <code class="docutils literal notranslate"><span class="pre">sales_by_store</span></code> object is a Series. A boxplot provides a lot of information (read about them <a class="reference external" href="https://www.simplypsychology.org/boxplots.html#:~:text=In%20descriptive%20statistics%2C%20a%20box,(or%20percentiles)%20and%20averages.">here</a>). We can see that the median (red line) is around <span class="math notranslate nohighlight">\(10^2 = 100\)</span> and the interquartile range is between somewhere around 50-15000. We also see we have some outliers on the upper end.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sales_by_store</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;store_id&#39;</span><span class="p">)[</span><span class="s1">&#39;sales_value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="c1"># boxplot</span>
<span class="n">sales_by_store</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="n">logy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Distribution of total sales across all stores&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/43de82dbaaa5c0356e88e9b3af71d6ff78ceea86cddb0c597c7b78c61ae5de4f.png" src="../_images/43de82dbaaa5c0356e88e9b3af71d6ff78ceea86cddb0c597c7b78c61ae5de4f.png" />
</div>
</div>
<p>We can quickly compare our boxplot with our numeric distribution and we see our they are similar (median: 157, interquartile range: 27-16000).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sales_by_store</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count      280.000000
mean      9374.588536
std      15141.356992
min          1.000000
25%         27.265000
50%        156.740000
75%      16167.215000
max      99608.720000
Name: sales_value, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>The KDE plot (which is also produced with <code class="docutils literal notranslate"><span class="pre">.plot.density()</span></code>) provides a smoothed histogram.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sales_by_store</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">kde</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Distribution of total sales across all stores&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/c33cb78ff46538d2d60cd3d6cbb8b7b1f7504e693db555c080f28f5ecc623b44.png" src="../_images/c33cb78ff46538d2d60cd3d6cbb8b7b1f7504e693db555c080f28f5ecc623b44.png" />
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.plot</span></code> sub-methods work exceptionally well with time series data. To illustrate, let’s create a Series that contains the <code class="docutils literal notranslate"><span class="pre">sales_value</span></code> of each transaction with the <code class="docutils literal notranslate"><span class="pre">transaction_timestamp</span></code> as the index.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sales</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;transaction_timestamp&#39;</span><span class="p">)[</span><span class="s1">&#39;sales_value&#39;</span><span class="p">]</span>
<span class="n">sales</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>transaction_timestamp
2017-01-01 11:53:26    0.50
2017-01-01 12:10:28    0.99
2017-01-01 12:26:30    1.43
2017-01-01 12:30:27    1.50
2017-01-01 12:30:27    2.78
Name: sales_value, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>A handy method we have not talked about is <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.resample.html"><code class="docutils literal notranslate"><span class="pre">resample()</span></code></a> which allows us to easily convert time series data. For example, if we wanted to sum all <code class="docutils literal notranslate"><span class="pre">sales_value</span></code>s by the hour we can use <code class="docutils literal notranslate"><span class="pre">.resample('H')</span></code> followed by <code class="docutils literal notranslate"><span class="pre">.sum()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sales</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/var/folders/8f/c06lv6q17tjbyjv2nkt0_s4s1sh0tg/T/ipykernel_27988/2926566041.py:1: FutureWarning: &#39;H&#39; is deprecated and will be removed in a future version, please use &#39;h&#39; instead.
  sales.resample(&#39;H&#39;).sum()
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>transaction_timestamp
2017-01-01 11:00:00      0.50
2017-01-01 12:00:00     13.69
2017-01-01 13:00:00     20.43
2017-01-01 14:00:00     36.58
2017-01-01 15:00:00    553.79
                        ...  
2018-01-01 00:00:00    337.78
2018-01-01 01:00:00    221.50
2018-01-01 02:00:00    142.84
2018-01-01 03:00:00     63.56
2018-01-01 04:00:00     10.52
Freq: h, Name: sales_value, Length: 8754, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>If we followed this sequence of code with <code class="docutils literal notranslate"><span class="pre">plot.line()</span></code> we get a line plot of the total sales values on the y-axis and the date-time on the x-axis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">sales</span>
    <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/var/folders/8f/c06lv6q17tjbyjv2nkt0_s4s1sh0tg/T/ipykernel_27988/1045739196.py:3: FutureWarning: &#39;H&#39; is deprecated and will be removed in a future version, please use &#39;h&#39; instead.
  .resample(&#39;H&#39;)
</pre></div>
</div>
<img alt="../_images/e309f2c0f3e51f2a6507d8b6db9ae44ce53266675b905b561998276f0722bbdc.png" src="../_images/e309f2c0f3e51f2a6507d8b6db9ae44ce53266675b905b561998276f0722bbdc.png" />
</div>
</div>
<p>The above plot is a bit busy since we’re plotting values for every hour over the course of a year. Let’s reduce the frequency and, instead, sum the <code class="docutils literal notranslate"><span class="pre">sales_value</span></code>s by day (<code class="docutils literal notranslate"><span class="pre">.resample('D')</span></code>). Now we see a bit more of a descriptive pattern. It looks like there is routinely higher sales transactions on particular days (probably certain days of the week such as weekends).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">sales</span>
    <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/15f8d2fbd552c46a2981cec4aa6ee3db9589eae6eec4778f860965c85a3011f7.png" src="../_images/15f8d2fbd552c46a2981cec4aa6ee3db9589eae6eec4778f860965c85a3011f7.png" />
</div>
</div>
<p>Let’s validate our assumption above regarding the weekly shopping pattern. The below code chunk performs the same as above where we compute total daily sales across all days of the year but then we follow that up by extracting the name of the weekday from the date-timestamp and then grouping  by the day of week and computing the median and interquartile range (IQR) for all daily sales for the year.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have not yet seen code that looks like <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">idx:</span> <span class="pre">idx.day_name()</span></code> do not worry. These are called lambda (anonymous) functions and we’ll discuss them more in module 6.</p>
</div>
<p>We definitely see that Saturday and Sunday are the weekdays with the heaviest sales value transactions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">day_order</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">&#39;Monday&#39;</span><span class="p">,</span> <span class="s1">&#39;Tuesday&#39;</span><span class="p">,</span> <span class="s1">&#39;Wednesday&#39;</span><span class="p">,</span> <span class="s1">&#39;Thursday&#39;</span><span class="p">,</span> <span class="s1">&#39;Friday&#39;</span><span class="p">,</span> <span class="s1">&#39;Saturday&#39;</span><span class="p">,</span> <span class="s1">&#39;Sunday&#39;</span><span class="p">]</span>

<span class="n">total_sales_by_weekday</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">sales</span>
    <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>                        <span class="c1"># resample by day</span>
    <span class="o">.</span><span class="n">sum</span><span class="p">()</span>                                <span class="c1"># compute total daily sales</span>
    <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="k">lambda</span> <span class="n">idx</span><span class="p">:</span> <span class="n">idx</span><span class="o">.</span><span class="n">day_name</span><span class="p">())</span>   <span class="c1"># extract week day name from date-timestamp</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;transaction_timestamp&#39;</span><span class="p">)</span>     <span class="c1"># group by day of week</span>
    <span class="o">.</span><span class="n">quantile</span><span class="p">([</span><span class="mf">.25</span><span class="p">,</span> <span class="mf">.5</span><span class="p">,</span> <span class="mf">.75</span><span class="p">])</span>             <span class="c1"># compute median and IQR of sales values</span>
    <span class="o">.</span><span class="n">unstack</span><span class="p">()</span>                            <span class="c1"># flatten output (results in a DataFrame)</span>
    <span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">day_order</span><span class="p">)</span>                   <span class="c1"># force index to follow weekday order         </span>
<span class="p">)</span>

<span class="n">total_sales_by_weekday</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Median and IQR of total sales by weekday&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">4</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/e0f534fd29640eeb1306e9237b73a7d28ec9be9985695614d1e68508663310b0.png" src="../_images/e0f534fd29640eeb1306e9237b73a7d28ec9be9985695614d1e68508663310b0.png" />
</div>
</div>
<p>Another common plot for Series is the bar plot. Let’s look at the median values from the analysis above. If we peak at the result we see we have a Series that contains the median total sales values for each weekday.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median_sales_by_weekday</span> <span class="o">=</span> <span class="n">total_sales_by_weekday</span><span class="p">[</span><span class="mf">0.50</span><span class="p">]</span>
<span class="n">median_sales_by_weekday</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>transaction_timestamp
Monday       6764.620
Tuesday      6581.320
Wednesday    5987.355
Thursday     6244.785
Friday       6698.905
Saturday     8461.210
Sunday       9276.320
Name: 0.5, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Rather than plot this as a line chart as we did above, we can use <code class="docutils literal notranslate"><span class="pre">.plot.bar()</span></code> to create a bar plot:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">median_sales_by_weekday</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Median total sales by weekday&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/40bf3711563e31ffcb3da45d840c08fe02bbb6c9c6a778a2815749682a6fffc2.png" src="../_images/40bf3711563e31ffcb3da45d840c08fe02bbb6c9c6a778a2815749682a6fffc2.png" />
</div>
</div>
<p>A common pattern you’ll use is to follow a <code class="docutils literal notranslate"><span class="pre">.value_counts()</span></code> method call with a bar plot. For example, say we want to assess the number of transactions in our data by department. We could easily get this with the following:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;department&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Total transactions by department&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">))</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/fcf3b110c97fdb77b602050af9d596cae4f8ae7389fffb864f45be93c8043181.png" src="../_images/fcf3b110c97fdb77b602050af9d596cae4f8ae7389fffb864f45be93c8043181.png" />
</div>
</div>
<p>Unfortunately, we see a lot of very small values that overcrowds the plot. We can make some small adjustments to our code to leave all department values for those departments in the top 10 as is but for all departments not in the top 10 we can condense them down to an ‘Other’ category.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We will discuss the <a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.where.html"><code class="docutils literal notranslate"><span class="pre">.where()</span></code> method</a> in module 6. For now just realize its a way to apply an if-else condition to a Series.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">top10</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;department&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">isin_top10</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;department&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">top10</span><span class="p">)</span>

<span class="p">(</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;department&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">isin_top10</span><span class="p">,</span> <span class="s1">&#39;Other&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Total transaction sales by department&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/a32ee854d98566772a90bd7378320e7a302540615c6d979df69d4a315c09027f.png" src="../_images/a32ee854d98566772a90bd7378320e7a302540615c6d979df69d4a315c09027f.png" />
</div>
</div>
<div class="attention admonition">
<p class="admonition-title">Knowledge check</p>
<ol class="arabic simple">
<li><p>Create a histogram for the <code class="docutils literal notranslate"><span class="pre">quantity</span></code> column. Remove any zero quantities and/or adjust the axis to make the plot more informative.</p></li>
<li><p>Compute the sum of <code class="docutils literal notranslate"><span class="pre">quantity</span></code> for each <code class="docutils literal notranslate"><span class="pre">store_id</span></code>. Now create density plot and box plot. Compare these plots to the summary statistics provided by <code class="docutils literal notranslate"><span class="pre">.describe()</span></code>.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">.resample()</span></code> to compute the sum of <code class="docutils literal notranslate"><span class="pre">quantity</span></code> for each day. Plot the results to assess if there is similar pattern as we saw with <code class="docutils literal notranslate"><span class="pre">sales_value</span></code>.</p></li>
<li><p>Use a bar plot to plot the total transaction quantities by <code class="docutils literal notranslate"><span class="pre">department</span></code>. Are the results similar to what we saw with total <code class="docutils literal notranslate"><span class="pre">sales_value</span></code> by department?</p></li>
</ol>
</div>
</section>
<section id="plotting-a-dataframe">
<h2>Plotting a DataFrame<a class="headerlink" href="#plotting-a-dataframe" title="Link to this heading">#</a></h2>
<p>Once we understand the basics of <code class="docutils literal notranslate"><span class="pre">.plot</span></code> with a Series we can extend this to a DataFrame easily. The primary difference is that the <code class="docutils literal notranslate"><span class="pre">.plot</span></code> sub-methods for a DataFrame allow us to plot multiple variables at once (i.e. <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>) and there are a few plotting methods that work for DataFrames that are not available for Series (i.e. <code class="docutils literal notranslate"><span class="pre">.scatterplot</span></code>, <code class="docutils literal notranslate"><span class="pre">.hexbin</span></code>)</p>
<p>For example, say we want to plot <code class="docutils literal notranslate"><span class="pre">sales_value</span></code> vs <code class="docutils literal notranslate"><span class="pre">quantity</span></code> across all transactions. The main difference we see below is that we specify which variables in our DataFrame to plot with <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;quantity&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;sales_value&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Sales versus quantity&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/223ede2e1eeb5c129ae3c989efbeed485cb7ab30c3288bb968889c8674ebbef3.png" src="../_images/223ede2e1eeb5c129ae3c989efbeed485cb7ab30c3288bb968889c8674ebbef3.png" />
</div>
</div>
<p>It’s important to point out that although we used a few plots that are usually considered univariate in the Series section (i.e. <code class="docutils literal notranslate"><span class="pre">.plot.hist</span></code>, <code class="docutils literal notranslate"><span class="pre">.plot.bar</span></code>), we can still use these same methods with DataFrames. For example, say we wanted to compute the sum of <code class="docutils literal notranslate"><span class="pre">sales_value</span></code> at the department level but we want the output to be a DataFrame (which is very common).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dept_sales</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;department&#39;</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;sales_value&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">})</span>
    <span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;sales_value&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">dept_sales</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>department</th>
      <th>sales_value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>GROCERY</td>
      <td>1310385.28</td>
    </tr>
    <tr>
      <th>1</th>
      <td>DRUG GM</td>
      <td>337458.00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>FUEL</td>
      <td>210337.18</td>
    </tr>
    <tr>
      <th>3</th>
      <td>PRODUCE</td>
      <td>193993.90</td>
    </tr>
    <tr>
      <th>4</th>
      <td>MEAT</td>
      <td>169014.96</td>
    </tr>
    <tr>
      <th>5</th>
      <td>MEAT-PCKGD</td>
      <td>120369.80</td>
    </tr>
    <tr>
      <th>6</th>
      <td>DELI</td>
      <td>86380.11</td>
    </tr>
    <tr>
      <th>7</th>
      <td>MISCELLANEOUS</td>
      <td>46790.04</td>
    </tr>
    <tr>
      <th>8</th>
      <td>PASTRY</td>
      <td>38328.18</td>
    </tr>
    <tr>
      <th>9</th>
      <td>NUTRITION</td>
      <td>35779.51</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can still plot the results by assigning the columns of interest to the <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> parameters in <code class="docutils literal notranslate"><span class="pre">.plot.barh</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It’s common to use <code class="docutils literal notranslate"><span class="pre">.sort_values</span></code> just before bar plots to adjust the order of the bars.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">dept_sales</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;sales_value&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;department&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;sales_value&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/9ffda746f064d25b43070de86b3b6bc96f1d1f721a7f456f531ec90537cc59e9.png" src="../_images/9ffda746f064d25b43070de86b3b6bc96f1d1f721a7f456f531ec90537cc59e9.png" />
</div>
</div>
<p>A great advantage of the <code class="docutils literal notranslate"><span class="pre">.plot</span></code> methods is that they allow us to easily plot more than one column of interest. For example, say we compute the total
for the given departments.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dept_totals</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df</span>
    <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;department != &#39;FUEL&#39; &amp; department != &#39;MISCELLANEOUS&#39;&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;department&#39;</span><span class="p">,</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;sales_value&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">})</span>
    <span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;sales_value&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">dept_totals</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>department</th>
      <th>sales_value</th>
      <th>quantity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>GROCERY</td>
      <td>1310385.28</td>
      <td>693486</td>
    </tr>
    <tr>
      <th>1</th>
      <td>DRUG GM</td>
      <td>337458.00</td>
      <td>111003</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PRODUCE</td>
      <td>193993.90</td>
      <td>111279</td>
    </tr>
    <tr>
      <th>3</th>
      <td>MEAT</td>
      <td>169014.96</td>
      <td>36421</td>
    </tr>
    <tr>
      <th>4</th>
      <td>MEAT-PCKGD</td>
      <td>120369.80</td>
      <td>43233</td>
    </tr>
    <tr>
      <th>5</th>
      <td>DELI</td>
      <td>86380.11</td>
      <td>22048</td>
    </tr>
    <tr>
      <th>6</th>
      <td>PASTRY</td>
      <td>38328.18</td>
      <td>16601</td>
    </tr>
    <tr>
      <th>7</th>
      <td>NUTRITION</td>
      <td>35779.51</td>
      <td>15188</td>
    </tr>
    <tr>
      <th>8</th>
      <td>SEAFOOD-PCKGD</td>
      <td>18996.37</td>
      <td>4207</td>
    </tr>
    <tr>
      <th>9</th>
      <td>FLORAL</td>
      <td>12494.58</td>
      <td>1798</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We can actually plot both the <code class="docutils literal notranslate"><span class="pre">sales_value</span></code> and <code class="docutils literal notranslate"><span class="pre">quantity</span></code> columns in the same bar plot by passing a list to <code class="docutils literal notranslate"><span class="pre">y</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">dept_totals</span>
    <span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;sales_value&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;department&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;sales_value&#39;</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">])</span>
    <span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;lower right&#39;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/e8276d333cd5e49506091c882cc9a5473f438c6a8963aece5b5a5b977bb4d7f0.png" src="../_images/e8276d333cd5e49506091c882cc9a5473f438c6a8963aece5b5a5b977bb4d7f0.png" />
</div>
</div>
<p>This feature is especially handy when plotting multiple line charts. For example, say we have daily totals computed for each of the discount variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_daily_discounts</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">df</span>
    <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">&quot;department == &#39;GROCERY&#39;&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;transaction_timestamp&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;retail_disc&#39;</span><span class="p">,</span> <span class="s1">&#39;coupon_disc&#39;</span><span class="p">,</span> <span class="s1">&#39;coupon_match_disc&#39;</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="p">)</span>

<span class="n">total_daily_discounts</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>retail_disc</th>
      <th>coupon_disc</th>
      <th>coupon_match_disc</th>
    </tr>
    <tr>
      <th>transaction_timestamp</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2017-01-01</th>
      <td>495.69</td>
      <td>4.45</td>
      <td>1.45</td>
    </tr>
    <tr>
      <th>2017-01-02</th>
      <td>613.58</td>
      <td>4.15</td>
      <td>2.15</td>
    </tr>
    <tr>
      <th>2017-01-03</th>
      <td>601.23</td>
      <td>8.95</td>
      <td>3.75</td>
    </tr>
    <tr>
      <th>2017-01-04</th>
      <td>712.03</td>
      <td>3.85</td>
      <td>1.85</td>
    </tr>
    <tr>
      <th>2017-01-05</th>
      <td>724.14</td>
      <td>14.60</td>
      <td>3.09</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If we apply <code class="docutils literal notranslate"><span class="pre">.plot.line()</span></code> to this DataFrame then by default it will plot each of the numeric variables on the same plot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_daily_discounts</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">logy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/5ee37bda55f43fa22dd90450709b3a59053c265486f63a97a80a3c571482170a.png" src="../_images/5ee37bda55f43fa22dd90450709b3a59053c265486f63a97a80a3c571482170a.png" />
</div>
</div>
<p>In fact, this same logic applies to many of the univariate plots such as histograms, denisty plots, box plots, etc.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">total_daily_discounts</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">kde</span><span class="p">(</span><span class="n">logx</span><span class="o">=</span><span class="kc">True</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/95a3f631a8d9339f42e485dfd74832d5b2245001688f090c8848e2b3492d8308.png" src="../_images/95a3f631a8d9339f42e485dfd74832d5b2245001688f090c8848e2b3492d8308.png" />
</div>
</div>
<div class="attention admonition">
<p class="admonition-title">Knowledge check</p>
<ol class="arabic simple">
<li><p>Compute the average <code class="docutils literal notranslate"><span class="pre">sales_value</span></code> and <code class="docutils literal notranslate"><span class="pre">quantity</span></code> by <code class="docutils literal notranslate"><span class="pre">household_id</span></code>. Create a density plot that plots both these columns.</p></li>
<li><p>Use a bar plot to assess whether married versus unmarried customers produce more transactions. Now do the same to assess which age groups produce the most transactions.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">.resample()</span></code> to compute the sum of <code class="docutils literal notranslate"><span class="pre">quantity</span></code> and <code class="docutils literal notranslate"><span class="pre">sales_value</span></code> for each month. Plot the results to assess which months have the largest <code class="docutils literal notranslate"><span class="pre">quantity</span></code> and <code class="docutils literal notranslate"><span class="pre">sales_value</span></code>s.</p></li>
</ol>
</div>
</section>
<section id="under-the-hood-matplotlib">
<h2>Under the hood - Matplotlib<a class="headerlink" href="#under-the-hood-matplotlib" title="Link to this heading">#</a></h2>
<p>Underneath the hood Pandas is using <a class="reference external" href="https://matplotlib.org/">Matplotlib</a> to create the plots. Matplotlib is the most tried-and-true, mature plotting library in Python; however, its a bit more difficult to digest Matplotlib which is why I first introduce plotting with Pandas.</p>
<p>In the next lesson we will dig into Matplotlib because, with it being the most popular plotting library in the Python ecosystem, it is important for you to have a baseline understanding of its capabilities.  But one thing I want to point out here is, since Pandas builds plots based on Matplotlib, we can actually use Matplotlib in conjunction with Pandas to advance our plots.</p>
<p>For example, Matplotlib provides many <a class="reference external" href="https://www.dunderdata.com/blog/view-all-available-matplotlib-styles">style options</a> that can be used to beautify our plots. If you are familiar with <a class="reference external" href="https://fivethirtyeight.com/">fivethirtyeight.com</a> you’ll know that most of their visualizations have a consistent theme. We can use Matplotlib to change the style of our plots to look like fivethirtyeight plots.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;fivethirtyeight&#39;</span><span class="p">)</span>

<span class="n">median_sales_by_weekday</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Median total sales by weekday&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">));</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/7a113ee2c091f2f179488f88beaf23faaeaf1684ad4b3eff465bef5892969495.png" src="../_images/7a113ee2c091f2f179488f88beaf23faaeaf1684ad4b3eff465bef5892969495.png" />
</div>
</div>
<p>We may also want to refine our tick marks so that they are formatted in the units of interest. For example, below we use Matplotlib’s ticker module to format our y-axis to be in dollar and comma formatted units:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mtick</span>

<span class="n">tick_format</span> <span class="o">=</span> <span class="n">mtick</span><span class="o">.</span><span class="n">StrMethodFormatter</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">{x:,.0f}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="p">(</span>
    <span class="n">median_sales_by_weekday</span>
    <span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Median total sales by weekday&#39;</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
    <span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">tick_format</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/449a070bf403a5b9e2651d4fd0bee7642a5bf1d271486eb4ca62560df8e3a99f.png" src="../_images/449a070bf403a5b9e2651d4fd0bee7642a5bf1d271486eb4ca62560df8e3a99f.png" />
</div>
</div>
<p>We’ll explore more Matplotlib capabilities in the next lesson but for now, happy Pandas plotting!</p>
</section>
<section id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Link to this heading">#</a></h2>
<div class="attention admonition">
<p class="admonition-title">Questions:</p>
<ol class="arabic simple">
<li><p>Identify all different products that contain “pizza” in their <code class="docutils literal notranslate"><span class="pre">product_type</span></code> description.</p></li>
<li><p>Use a bar plot to assess whether married versus unmarried customers purchase more pizza products.</p></li>
<li><p>Create a scatter plot to assess the <code class="docutils literal notranslate"><span class="pre">quantity</span></code> versus <code class="docutils literal notranslate"><span class="pre">sales_value</span></code> of pizza products sold.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">.resample</span></code> to compute the total <code class="docutils literal notranslate"><span class="pre">quantity</span></code> of pizza <code class="docutils literal notranslate"><span class="pre">product_type</span></code>s for each day of the year. Plot the results to assess if there is a pattern.</p></li>
</ol>
</div>
</section>
<section id="computing-environment">
<h2>Computing environment<a class="headerlink" href="#computing-environment" title="Link to this heading">#</a></h2>
<div class="cell tag_hide-input docutils container">
<details class="hide above-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell source</span>
<span class="expanded">Hide code cell source</span>
</summary>
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> watermark
<span class="o">%</span><span class="k">watermark</span> -v -p jupyterlab,pandas,completejourney_py,matplotlib
</pre></div>
</div>
</div>
</details>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Python implementation: CPython
Python version       : 3.12.4
IPython version      : 8.26.0

jupyterlab        : 4.2.3
pandas            : 2.2.2
completejourney_py: 0.0.3
matplotlib        : 3.8.4
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./05-module"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="overview.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Overview</p>
      </div>
    </a>
    <a class="right-next"
       href="lesson-5b.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Lesson 5b: Plotting with Matplotlib</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-objectives">Learning objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-plot-attribute">The <code class="docutils literal notranslate"><span class="pre">.plot</span></code> attribute</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#knowledge-check">Knowledge check</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-a-series">Plotting a Series</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plotting-a-dataframe">Plotting a DataFrame</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#under-the-hood-matplotlib">Under the hood - Matplotlib</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercises">Exercises</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#computing-environment">Computing environment</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Bradley C. Boehmke
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>